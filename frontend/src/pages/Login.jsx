import React, { useState } from 'react';
export default function Login({ onLogin }){ const [username,setUsername]=useState('Marcel'); const [password,setPassword]=useState('1234'); const [err,setErr]=useState(''); const handle=async(e)=>{ e.preventDefault(); setErr(''); try{ const r=await fetch('/api/auth/login',{ method:'POST', headers:{ 'Content-Type':'application/json' }, body: JSON.stringify({ username,password }) }); if(!r.ok){ setErr('Ongeldige login'); return } const data=await r.json(); if(data?.user?.mustChangePassword){ const newPass = prompt('Je moet je wachtwoord wijzigen. Nieuw wachtwoord:'); if(newPass){ await fetch('/api/auth/change-password',{ method:'POST', headers:{ 'Content-Type':'application/json', Authorization:`Bearer ${data.token}` }, body: JSON.stringify({ newPassword:newPass }) }); } }
 onLogin(data.token); }catch(e){ setErr(String(e)) } }
 return (<div style={{maxWidth:420,margin:'2rem auto',padding:16,borderRadius:8,boxShadow:'0 6px 18px rgba(0,0,0,0.06)'}}><h2>Inloggen</h2><form onSubmit={handle}><input placeholder='Gebruikersnaam' value={username} onChange={e=>setUsername(e.target.value)} /><br/><input placeholder='Wachtwoord' type='password' value={password} onChange={e=>setPassword(e.target.value)} /><br/><button>Inloggen</button>{err && <div style={{color:'red'}}>{err}</div>}</form></div>) }
